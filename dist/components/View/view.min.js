var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},ho;!function(t){var e;!function(e){var n;!function(e){var n=t.components.Component,r=t.flux,i=t.promise.Promise,o=function(e){function n(){e.apply(this,arguments),this.html="",this.properties=[{name:"viewname",required:!0}]}return __extends(n,e),n.prototype.init=function(){r.STORES.get(r.Router).register(this.state_changed,this)},Object.defineProperty(n.prototype,"viewname",{get:function(){return this.properties.viewname},enumerable:!0,configurable:!0}),n.prototype.state_changed=function(t){var e,n=this,r=t.state.view.filter(function(t){return t.name===n.viewname})[0];r&&r.html&&(e=r.html,this.getHtml(e).then(function(t){return e=t,this.loadDynamicRequirements(e)}.bind(this)).then(function(){this.html=!1,this.element.innerHTML=e,this.render()}.bind(this)))},n.prototype.getHtml=function(e){return"undefined"==typeof e?t.promise.Promise.create(null):".html"!==e.slice(-5)?t.promise.Promise.create(e):new t.promise.Promise(function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState){var e=r.responseText;200==r.status?t(e):n(e)}},r.open("GET",e,!0),r.send()})},n.prototype.loadDynamicRequirements=function(t){return i.all([this.loadDynamicComponents(t),this.loadDynamicAttributes(t)])},n.prototype.loadDynamicComponents=function(e){var n=e.match(/<!--\s*requires?="(.+)"/);n=null!==n?n[1].split(",").map(function(t){return t.trim()}):[];var r=t.components.registry.instance,o=n.filter(function(t){return!r.hasComponent(t)}).map(function(t){return r.loadComponent(t)});return i.all(o)},n.prototype.loadDynamicAttributes=function(e){var n=e.match(/<!--\s*attributes?="(.+)"/);n=null!==n?n[1].split(",").map(function(t){return t.trim()}):[];var r=t.components.registry.instance,o=n.filter(function(t){return!r.hasAttribute(t)}).map(function(t){return r.loadAttribute(t)});return i.all(o)},n}(n);e.View=o}(n=e.components||(e.components={}))}(e=t.ui||(t.ui={}))}(ho||(ho={}));